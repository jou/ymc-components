<?xml version="1.0" encoding="UTF-8"?>
<database>
 <table>
  <name>pipe_execution</name>
  <declaration>
   <field>
    <name>id</name>
    <type>integer</type>
    <autoincrement>true</autoincrement>
    <notnull>true</notnull>
   </field>
   <field>
    <name>state</name>
    <type>integer</type>
    <notnull>true</notnull>
   </field>
   <field>
    <name>parent</name>
    <type>integer</type>
    <notnull>true</notnull>
    <default>0</default>
   </field>
   <field>
    <name>created</name>
    <type>timestamp</type>
    <notnull>true</notnull>
    <!--default>now</default-->
   </field>
   <field>
    <name>pipe_name</name>
    <type>text</type>
    <notnull>true</notnull>
   </field>
   <field>
    <name>pipe_version</name>
    <type>integer</type>
    <notnull>true</notnull>
   </field>

   <index>
    <name>pipe_execution_id</name>
    <primary>true</primary>
    <unique>true</unique>
    <field>
     <name>id</name>
    </field>
   </index>
  </declaration>
 </table>

 <table>
  <name>pipe_execution_state</name>
  <declaration>
   <field>
    <name>execution_id</name>
    <type>integer</type>
    <notnull>true</notnull>
    <default>0</default>
   </field>
   <field>
    <name>node_id</name>
    <type>integer</type>
    <notnull>true</notnull>
    <default>0</default>
   </field>
   <field>
    <name>state</name>
    <type>clob</type>
    <notnull>true</notnull>
   </field>

   <index>
    <name>pipe_execution_state_id</name>
    <primary>true</primary>
    <unique>true</unique>
    <field>
     <name>execution_id</name>
    </field>
    <field>
     <name>node_id</name>
    </field>
   </index>
  </declaration>
 </table>

 <table>
  <name>pipe_node</name>
  <declaration>
   <field>
    <name>class</name>
    <type>text</type>
    <length>255</length>
    <notnull>true</notnull>
   </field>
   <field>
    <name>name</name>
    <type>text</type>
    <length>255</length>
    <notnull>true</notnull>
   </field>
   <field>
    <name>config</name>
    <type>clob</type>
    <notnull>true</notnull>
   </field>
   <field>
    <name>id</name>
    <type>integer</type>
    <autoincrement>true</autoincrement>
    <notnull>true</notnull>
   </field>
   <field>
    <name>pipe_id</name>
    <type>integer</type>
    <notnull>true</notnull>
    <default>0</default>
   </field>

   <index>
    <name>pipe_node_id</name>
    <primary>true</primary>
    <unique>true</unique>
    <field>
     <name>id</name>
    </field>
   </index>

   <index>
    <name>pipe_id</name>
    <field>
     <name>pipe_id</name>
    </field>
   </index>
  </declaration>
 </table>

 <table>
  <name>pipe_edge</name>
  <declaration>
   <field>
    <name>pipe_id</name>
    <type>integer</type>
    <notnull>true</notnull>
   </field>
   <field>
    <name>in_id</name>
    <type>integer</type>
    <notnull>true</notnull>
   </field>
   <field>
    <name>out_id</name>
    <type>integer</type>
    <notnull>true</notnull>
   </field>
   <index>
    <name>pipe_edge_in_id</name>
    <field>
     <name>in_id</name>
    </field>
   </index>
  </declaration>
 </table>

 <table>
  <name>pipe</name>
  <declaration>
   <field>
    <name>created</name>
    <type>integer</type>
    <notnull>true</notnull>
    <default>0</default>
   </field>
   <field>
    <name>id</name>
    <type>integer</type>
    <autoincrement>true</autoincrement>
    <notnull>true</notnull>
   </field>
   <field>
    <name>name</name>
    <type>text</type>
    <length>64</length>
    <notnull>true</notnull>
   </field>

   <index>
    <name>name</name>
    <unique>false</unique>
    <field>
     <name>name</name>
    </field>
   </index>

   <index>
    <name>pipe_id</name>
    <primary>true</primary>
    <unique>true</unique>
    <field>
     <name>id</name>
    </field>
   </index>
  </declaration>
 </table>
</database>
